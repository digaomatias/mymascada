# =============================================================================
# MyMascada - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# Run ./setup.sh for guided configuration, or edit manually.
#
# Required values are marked with [REQUIRED].
# Optional values have sensible defaults and can be left empty.
# =============================================================================

# -----------------------------------------------------------------------------
# Database [REQUIRED]
# -----------------------------------------------------------------------------
# PostgreSQL credentials. The setup script generates a secure password.
DB_USER=mymascada
DB_PASSWORD=CHANGE_ME
DB_NAME=mymascada

# -----------------------------------------------------------------------------
# JWT Authentication [REQUIRED]
# -----------------------------------------------------------------------------
# Secret key for signing JWT tokens. Must be at least 32 characters.
# Generate with: openssl rand -base64 64
JWT_KEY=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_64
JWT_ISSUER=MyMascada
JWT_AUDIENCE=MyMascadaUsers

# -----------------------------------------------------------------------------
# Application URLs [REQUIRED]
# -----------------------------------------------------------------------------
# The public URL where users access the frontend (no trailing slash).
# Examples: http://localhost:3000, https://finance.example.com
FRONTEND_URL=http://localhost:3000

# Host port for the frontend container. Extracted from FRONTEND_URL by setup.sh.
# The container always listens on 3000 internally; this maps it to the host port.
FRONTEND_PORT=3000

# The internal API URL used by containers to reach the backend.
# In Docker Compose, this uses the service name. Don't change unless needed.
API_URL=http://api:5126

# The public API URL that browsers use to reach the backend.
# For local access: http://localhost:5126
# For a domain with reverse proxy (Caddy or Nginx): set to the same value as
# FRONTEND_URL, since the proxy routes /api/* to the API container.
# Example: https://finance.example.com
PUBLIC_API_URL=http://localhost:5126

# CORS allowed origins (comma-separated). Must include your FRONTEND_URL.
# For reverse proxy setups, include both internal and external URLs.
CORS_ALLOWED_ORIGINS=http://localhost:3000

# -----------------------------------------------------------------------------
# Beta Access (Optional)
# -----------------------------------------------------------------------------
# Set to true to require invite codes for new registrations.
# BETA_REQUIRE_INVITE_CODE=false
# BETA_VALID_INVITE_CODES=CODE1,CODE2

# -----------------------------------------------------------------------------
# AI Categorization - OpenAI (Optional)
# -----------------------------------------------------------------------------
# Enables AI-powered transaction categorization.
# Without this, manual categorization and rule-based matching still work.
# Get a key at: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# -----------------------------------------------------------------------------
# Google OAuth (Optional)
# -----------------------------------------------------------------------------
# Enables "Sign in with Google" alongside email/password auth.
# Create credentials at: https://console.cloud.google.com/apis/credentials
# Set authorized redirect URI to: {FRONTEND_URL}/api/auth/google-callback
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Bank Sync - Akahu (Optional, New Zealand only)
# -----------------------------------------------------------------------------
# Enables automatic bank account syncing via Akahu.
# Set to true to enable the feature. Each user enters their own tokens
# via the Settings page. Register at: https://my.akahu.nz/developers
AKAHU_ENABLED=false
# AKAHU_APP_SECRET is only needed for Production App OAuth flow (not personal apps)
# AKAHU_APP_SECRET=

# -----------------------------------------------------------------------------
# Email Notifications (Optional)
# -----------------------------------------------------------------------------
# Enables email features: password reset, email verification, notifications.
# Without this, password reset uses console-logged tokens (dev mode).
#
# Provider: "smtp" or "postmark"
EMAIL_ENABLED=false
EMAIL_PROVIDER=smtp
EMAIL_FROM_ADDRESS=noreply@example.com
EMAIL_FROM_NAME=MyMascada

# SMTP settings (when EMAIL_PROVIDER=smtp)
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_STARTTLS=true
SMTP_USE_SSL=false

# Postmark settings (when EMAIL_PROVIDER=postmark)
# POSTMARK_SERVER_TOKEN=
# POSTMARK_MESSAGE_STREAM=outbound

# -----------------------------------------------------------------------------
# Reverse Proxy / HTTPS (Optional)
# -----------------------------------------------------------------------------
# If using the built-in Caddy proxy (docker compose --profile proxy up),
# set your domain here. Caddy will automatically provision HTTPS via Let's Encrypt.
# DOMAIN=finance.example.com
